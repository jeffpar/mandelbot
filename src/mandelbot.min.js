(function(){/*
 (c) Jeff Parsons 2017

 This file is part of an open-source project (https://github.com/jeffpar/mandelbot) with no formal
 license.  It may be freely reused.  Any derivative work just needs to provide attribution along with
 the above copyright.
*/
var q=0,r=1E3/60|0,t,u,v=[],w=0;
function x(m,k,a,b,d,f,e,c,p){k=void 0===k?0:k;a=void 0===a?0:a;this.B=void 0===b?-.5:b;this.D=void 0===d?0:d;this.m=Math.abs(void 0===f?1.5:f);this.s=Math.abs(void 0===e?1.5:e);this.F=[0,0,0,0];this.G=void 0!==c?c:y;this.v=Math.floor(223/Math.sqrt(.001+4*Math.min(this.m,this.s)));this.g="X: "+this.B+" (+/-"+this.m+") Y: "+this.D+" (+/-"+this.s+") Iterations/point: "+this.v;try{var l;a:{if(this.h=document.getElementById(m))if(this.A=this.h.width,this.w=this.h.height,this.i=this.h.getContext("2d")){this.i.imageSmoothingEnabled=
!1;l=!0;break a}this.g="Missing view canvas";l=!1}var g;if(g=l)a:{var n=k||this.A,h=a||this.w;if(this.b=this.i.createImageData(n,h))if(this.c=document.createElement("canvas"))if(this.c.width=this.a=n,this.c.height=this.j=h,this.H=this.c.getContext("2d")){g=!0;break a}this.g="Unable to create grid canvas";g=!1}g&&(this.f=this.l=0,this.C=this.B-this.m,this.I=2*this.m/this.a,this.K=this.D+this.s,this.J=2*this.s/this.j,this.o=this.C,this.u=this.K)}catch(K){this.g=K.message}p&&(this.status=document.getElementById(p))&&
(this.status.innerHTML=this.g)}function z(m,k,a,b){a=a||100;var d=0,f=0,e=0,c=0,p,l=a;do f=2*d*f+k,d=e-c+m,p=(e=d*d)+(c=f*f);while(0<--l&&4>p);if(b){b[0]=a;if(b[1]=l){l=4;do f=2*d*f+k,d=e-c+m,e=d*d,c=f*f;while(0<--l)}b[2]=e;b[3]=c}return l}function A(m,k){1<k&&(k=1);var a=m/60,b=1*k,d=b*(1-Math.abs(a%2-1)),f=0,e=0,c=0;1>a?(f=b,e=d):2>a?(f=d,e=b):3>a?(e=b,c=d):4>a?(e=d,c=b):5>a?(f=d,c=b):(f=b,c=d);a=k-b;return 255*(f+a)&255|(255*(e+a)&255)<<8|(255*(c+a)&255)<<16}
var y=4,B=1/Math.log(2),C=Math.log(.5)*B,D=0,E=8,D=void 0===D?0:D,E=void 0===E?1:E,F=0,G=0;do{var H=0,I=Date.now(),J,L=50;do{var L=2*L,M=z(-.5,0,D+L);J=Date.now()-I;if(J>=r)break;H+=D+L-M;D=0}while(1);F+=H;E&&(D=Math.floor(H/E));G++}while(0<--E);u=Math.floor(F/G);
function N(m){if(!m){q=0;for(var k=v.length;k--;){for(var a=v[w],b=!1,d=a.f,f=a.l,e=0,c=0,p=t;a.l<a.j;){for(;0<p&&a.f<a.a;){var b=a.v,l=z(a.o,a.u,b,a.F),g=a.F,n=0;if(g[1]){var h=5+(g[0]-g[1])-C-Math.log(Math.log(g[2]+g[3]))*B;switch(a.G){case 0:n=-1;break;case 1:n=A(360*h/g[0],1);break;case 2:case 3:n=A(360*h/g[0],10*h/g[0]);3==a.G&&(n=n&4278255360|n>>16&255|(n&255)<<16);break;case y:h=Math.floor(512*h/g[0]),255<h&&(h=255),n=h|h<<8|h<<16}}g=a;h=4*(a.l*g.a+a.f);g.b.data[h]=n&255;g.b.data[h+1]=n>>8&
255;g.b.data[h+2]=n>>16&255;g.b.data[h+3]=255;a.o+=a.I;a.f++;c||e++;p-=b-l;b=!0}if(0>=p)break;a.o=a.C;a.f=0;a.u-=a.J;a.l++;d=0;e=a.a;c++}b&&(c||c++,e=void 0===e?a.a:e,c=void 0===c?a.j:c,a.H.putImageData(a.b,0,0,void 0===d?0:d,void 0===f?0:f,e,c),a.i.drawImage(a.c,0,0,a.a,a.j,0,0,a.A,a.w));b&&(m=!0);++w>=v.length&&(w=0)}}m&&!q&&(q=setTimeout(N,0))}window.initViewport=function(m,k,a,b,d,f,e,c,p,l){l=void 0===l?!0:l;m=new x(m,k,a,b,d,f,e,c,p);l&&(v.push(m),t=Math.floor(u/v.length),N(!0));return m};})() //# sourceMappingURL=/src/mandelbot.js.map
