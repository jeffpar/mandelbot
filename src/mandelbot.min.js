(function(){/*
 (c) Jeff Parsons 2017

 This file is part of an open-source project (https://github.com/jeffpar/mandelbot) with no formal
 license.  It may be freely reused.  Any derivative work just needs to provide attribution along with
 the above copyright.
*/
var p=0,q=1E3/60|0,r,t,u=[],v=0,w=1/Math.log(2),x=Math.log(.5)*w;
function y(l,m,a,f,d,g,e,c){m=void 0===m?0:m;a=void 0===a?0:a;c=void 0===c?"":c;this.D=void 0===f?-.5:f;this.G=void 0===d?0:d;this.B=void 0===g?1:g;this.u=void 0===e?1:e;this.v=[0,0,0,0];this.g="max iterations per "+q+"ms timeslice: "+t;try{var h;a:{if(this.h=document.getElementById(l))if(this.A=this.h.width,this.w=this.h.height,this.i=this.h.getContext("2d")){this.i.imageSmoothingEnabled=!1;h=!0;break a}this.g="Missing view canvas";h=!1}var b;if(b=h)a:{var k=m||this.A,n=a||this.w;if(this.b=this.i.createImageData(k,
n))if(this.c=document.createElement("canvas"))if(this.c.width=this.a=k,this.c.height=this.j=n,this.C=this.c.getContext("2d")){b=!0;break a}this.g="Unable to create grid canvas";b=!1}b&&(this.f=this.l=0,this.s=this.D-this.B,this.F=2*this.B/this.a,this.I=this.G+this.u,this.H=2*this.u/this.j,this.m=this.s,this.o=this.I)}catch(I){this.g=I.message}c&&(this.status=document.getElementById(c))&&(this.status.innerHTML=this.g)}
function z(l,m,a,f){a=a||100;var d=0,g=0,e=0,c=0,h,b=a;do g=2*d*g+m,d=e-c+l,h=(e=d*d)+(c=g*g);while(0<--b&&4>h);if(f){f[0]=a;if(f[1]=b){b=4;do g=2*d*g+m,d=e-c+l,e=d*d,c=g*g;while(0<--b)}f[2]=e;f[3]=c}return b}var A=0,B=8,A=void 0===A?0:A,B=void 0===B?1:B,C=0,D=0;do{var E=0,F=Date.now(),G,H=50;do{var H=2*H,J=z(-.5,0,A+H);G=Date.now()-F;if(G>=q)break;E+=A+H-J;A=0}while(1);C+=E;B&&(A=Math.floor(E/B));D++}while(0<--B);t=Math.floor(C/D);
function K(l){if(!l){p=0;for(var m=u.length;m--;){for(var a=u[v],f=!1,d=a.f,g=a.l,e=0,c=0,h=r;a.l<a.j;){for(;0<h&&a.f<a.a;){var f=z(a.m,a.o,100,a.v),b=a.v,k=0;b[1]&&(k=5+(b[0]-b[1])-x-Math.log(Math.log(b[2]+b[3]))*w,k=Math.floor(512*k/b[0]),255<k&&(k=255),k=k|k<<8|k<<16);var b=a,n=4*(a.l*b.a+a.f);b.b.data[n]=k&255;b.b.data[n+1]=k>>8&255;b.b.data[n+2]=k>>16&255;b.b.data[n+3]=255;a.m+=a.F;a.f++;c||e++;h-=100-f;f=!0}if(0>=h)break;a.m=a.s;a.f=0;a.o-=a.H;a.l++;d=0;e=a.a;c++}f&&(c||c++,e=void 0===e?a.a:
e,c=void 0===c?a.j:c,a.C.putImageData(a.b,0,0,void 0===d?0:d,void 0===g?0:g,e,c),a.i.drawImage(a.c,0,0,a.a,a.j,0,0,a.A,a.w));f&&(l=!0);++v>=u.length&&(v=0)}}l&&!p&&(p=setTimeout(K,0))}window.initViewport=function(l,m,a,f,d,g,e,c,h){h=void 0===h?!0:h;l=new y(l,m,a,f,d,g,e,c);h&&(u.push(l),r=Math.floor(t/u.length),K(!0));return l};})() //# sourceMappingURL=/src/mandelbot.js.map
