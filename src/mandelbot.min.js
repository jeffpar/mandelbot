(function(){/*
 (c) Jeff Parsons 2017

 This file is part of an open-source project (https://github.com/jeffpar/mandelbot) with no formal license.
 All portions not licensed from other sources may be freely reused.  Any derivative work just needs to provide
 attribution along with the above copyright.

 Portions copyright 2012 by Christian Stigen Larsen and licensed under [Apache License](http://www.apache.org/licenses/LICENSE-2.0),
 Version 2.0.  Those portions are clearly identified in [mandelbot.js](https://github.com/jeffpar/mandelbot/blob/master/src/mandelbot.js)
 and must be accompanied by the same Apache License if they are redistributed.
*/
var q=0,r=1E3/60|0,t,u=[],v=0;
function w(m,n,a,d,f,c,b,e,h){n=void 0===n?0:n;a=void 0===a?0:a;d=void 0===d?-.5:d;f=void 0===f?0:f;c=void 0===c?1.5:c;b=void 0===b?1.5:b;this.u=!1;"number"==typeof d?(this.w=d,this.A=f,this.b=Math.abs(c),this.c=Math.abs(b)):(this.u=!0,this.w=new BigNumber(d),this.A=new BigNumber(f),this.b=(new BigNumber(c)).abs(),this.c=(new BigNumber(b)).abs());this.G=void 0!==e?e:x;this.H=Math.floor(223/Math.sqrt(.001+4*Math.min(this.b,this.c)));this.m="X: "+this.w+" (+/-"+this.b+") Y: "+this.A+" (+/-"+this.c+
") Iterations: "+this.H;this.F=[0,0,0,0];try{var l;a:{if(this.o=document.getElementById(m))if(this.J=this.o.width,this.I=this.o.height,this.s=this.o.getContext("2d")){this.s.imageSmoothingEnabled=!1;l=!0;break a}this.m="Missing view canvas";l=!1}var k;if(k=l)a:{var g=n||this.J,p=a||this.I;if(this.f=this.s.createImageData(g,p))if(this.h=document.createElement("canvas"))if(this.h.width=this.a=g,this.h.height=this.j=p,this.L=this.h.getContext("2d")){k=!0;break a}this.m="Unable to create grid canvas";
k=!1}k&&(this.i=this.v=0,this.u?(this.C=this.w.minus(this.b),this.B=this.b.times(2).dividedBy(this.a),this.K=this.A.plus(this.c),this.D=this.c.times(2).dividedBy(this.j)):(this.C=this.w-this.b,this.B=2*this.b/this.a,this.K=this.A+this.c,this.D=2*this.c/this.j,this.g=this.C,this.l=this.K))}catch(J){this.m=J.message}h&&(this.status=document.getElementById(h))&&(this.status.textContent=this.m)}
function y(m,n,a,d){var f=a=a||100,c,b,e,h,l;if("number"==typeof m){h=e=b=c=0;do b=2*c*b+n,c=e-h+m,l=(e=c*c)+(h=b*b);while(0<--f&&4>l);if(f&&d){l=4;do b=2*c*b+n,c=e-h+m,e=c*c,h=b*b;while(0<--l)}}else{c=new BigNumber(0);b=new BigNumber(0);e=new BigNumber(0);h=new BigNumber(0);do b=c.times(b).times(2).plus(n),c=e.minus(h).plus(m),e=c.times(c),h=b.times(b),l=e.plus(h);while(0<--f&&l.lt(4));if(f&&d){l=4;do b=c.times(b).times(2).plus(n),c=e.minus(h).plus(m),e=c.times(c),h=b.times(b);while(0<--l)}}d&&(d[0]=
a,d[1]=f,d[2]=e,d[3]=h);return f}function z(m,n){1<n&&(n=1);var a=m/60,d=1*n,f=d*(1-Math.abs(a%2-1)),c=0,b=0,e=0;1>a?(c=d,b=f):2>a?(c=f,b=d):3>a?(b=d,e=f):4>a?(b=f,e=d):5>a?(c=f,e=d):(c=d,e=f);a=n-d;return 255*(c+a)&255|(255*(b+a)&255)<<8|(255*(e+a)&255)<<16}var x=4,A=1/Math.log(2),B=Math.log(.5)*A,C=0,D=8,C=void 0===C?0:C,D=void 0===D?1:D,E=0,F=0;do{var G=0,H=Date.now(),I,K=50;do{var K=2*K,L=y(-.5,0,C+K);I=Date.now()-H;if(I>=r)break;G+=C+K-L;C=0}while(1);E+=G;D&&(C=Math.floor(G/D));F++}while(0<--D);
t=Math.floor(E/F);
function M(m){if(!m){q=0;for(var n=u.length;n--;){for(var a=u[v],d=!1,f=a.i,c=a.v,b=0,e=0,h=Math.floor(t/u.length);a.v<a.j;){for(;0<h&&a.i<a.a;){var d=a.H,l=y(a.g,a.l,d,a.F),k=a.F,g=0;if(k[1])switch(g=5+(k[0]-k[1])-B-Math.log(Math.log(k[2]+k[3]))*A,a.G){default:g=-1;break;case 1:g=z(360*g/k[0],1);break;case 2:case 3:g=z(360*g/k[0],10*g/k[0]);3==a.G&&(g=g&4278255360|g>>16&255|(g&255)<<16);break;case x:g=Math.floor(512*g/k[0]),255<g&&(g=255),g=g|g<<8|g<<16}var k=a,p=4*(a.v*k.a+a.i);k.f.data[p]=g&255;
k.f.data[p+1]=g>>8&255;k.f.data[p+2]=g>>16&255;k.f.data[p+3]=255;a.u?a.g=a.g.plus(a.B):a.g+=a.B;a.i++;e||b++;h-=d-l;d=!0}if(0>=h)break;a.g=a.C;a.i=0;a.l=a.u?a.l.minus(a.D):a.l-a.D;a.v++;e++;f=0;b=a.a}d&&(e=e||1,b=void 0===b?a.a:b,e=void 0===e?a.j:e,a.L.putImageData(a.f,0,0,void 0===f?0:f,void 0===c?0:c,b,e),a.s.drawImage(a.h,0,0,a.a,a.j,0,0,a.J,a.I));d&&(m=!0);++v>=u.length&&(v=0)}}m&&!q&&(q=setTimeout(M,0))}
window.initViewport=function(m,n,a,d,f,c,b,e,h,l){l=void 0===l?!0:l;m=new w(m,n,a,d,f,c,b,e,h);l&&(u.push(m),M(!0));return m};})() //# sourceMappingURL=/src/mandelbot.js.map
